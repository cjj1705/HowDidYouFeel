#pragma once
#include "GameObject.h"
#include "PhysicsManager.h"

class Stage :
	public GameObject
{
public:
	Stage(PhysicsManager *pm);
	~Stage();

	PhysicsManager *pm;

	// 스테이지 수_y, 스테이지 수_x, y, x
	// 1 : wall, 2 : trampoline, 3 : trap, 4 : savePoint, 5 : jumpAdder, 8 : boss, 9 : player
	const wchar_t stageInfo[2][3][20][31] = {
		{ 
			{
				L"111111111111111111111111111111",
				L"100000000000000000000000000001",
				L"100000000000000000000000000001",
				L"100000000000000000000000000001",
				L"100000000000000000000000000001",
				L"100000000000000000000000000001",
				L"100000000000000000000000000001",
				L"100000000000000000001000000001",
				L"100000000000000000000100000001",
				L"100000000000000000000010000001",
				L"100000000000111111111111000001",
				L"100000000000000000000010000001",
				L"100000000000000000000100000001",
				L"100000000000000000001000000000",
				L"100000000000000000000000000000",
				L"100000000000000000000000000000",
				L"100000000000000000000000000000",
				L"100000000000000000000000000000",
				L"100000000000000000000000000000",
				L"111111111111111111111111111111",
			}, 
			{
				L"111111111111111111111111111111",
				L"100000000000000000000000000001",
				L"100000000000000000000000000001",
				L"100000000000000000000000000000",
				L"100000000000000000000000000000",
				L"100000000000000000000000000000",
				L"100000000000000000000000000001",
				L"100003000033333300000000333331",
				L"100011111111111111111111111111",
				L"100000000000000000000000000001",
				L"100000000000000000000000000001",
				L"133000000000000000000000000001",
				L"111111111110000000011111111111",
				L"000000000000000000000000000001",
				L"000003000000000000000000000001",
				L"000001111111111111111100001111",
				L"000000040000000000000000000001",
				L"000000000000000000000000000001",
				L"000000000000000000000000000001",
				L"111111111111111111111111111111",
			}, 
			{
				L"111111111111111111111111111111",
				L"100000000000000000000000000001",
				L"100000000000000000000000000001",
				L"000000000000000000000000000001",
				L"000000000000000000000000000001",
				L"000000000000000000000000000001",
				L"100000000000000000000000000001",
				L"100000000000000000000000000001",
				L"100000000000000000000000000001",
				L"100000000030000000030000000001",
				L"100000000010000000010000000001",
				L"133333333310000000013333333331",
				L"111111111110000000011111111111",
				L"100000000000033330000000000001",
				L"100000000000011110000000000001",
				L"100000000000000000000000000001",
				L"140000111111111111111111000041",
				L"100000000000000000000000000001",
				L"100000000000000000000000000001",
				L"111111000000000000000000111111",
			}
		}, 
		{ 
			{
				L"111111111111111111111111111111",
				L"100000000000000000000000000001",
				L"100000000000000000000000000001",
				L"100000000000000000000000000001",
				L"100000000111000000111000000001",
				L"100000000000000000000000000001",
				L"100111000000000000000000111001",
				L"100000000000000000000000000001",
				L"100000000000000000000000000001",
				L"100001110000000000000011100001",
				L"100000000000008000000000000001",
				L"100000000000000000000000000001",
				L"101110000000000000000000011101",
				L"100000000000000000000000000001",
				L"100000000001111111100000000001",
				L"100000000000000000000000000001",
				L"100001110000000000000011100000",
				L"100000000000000000000000000000",
				L"100000000000000000000000000000",
				L"111111111111111111111111111111",
			}, 
			{
				L"111111111111111111111111111111",
				L"100000000000001111000000000001",
				L"100000000000001111000000000001",
				L"100000000500001111000000000001",
				L"100000000000001111000050005001",
				L"100003333000051111003333000001",
				L"100001111000001111001111003001",
				L"100001111500001111001111001001",
				L"100001111000051111001111000051",
				L"100001111000001111001111000001",
				L"100001111500001111001111000031",
				L"100001111000001111001111500011",
				L"100001111000051111001111000004",
				L"100001111500001111001111300000",
				L"100001111000000000001111100000",
				L"140001111300000000001111000011",
				L"000001111100500500501111000001",
				L"000001111000000000001111000001",
				L"000001111333333333331111333331",
				L"111111111111111111111111111111",
			},
			{
				L"111111000000000000000000111111",
				L"100000000000000000000000100041",
				L"100000000000000000000000100001",
				L"100000000000000000000000100001",
				L"100000000000000000000000100001",
				L"100000333332222222233333120001",
				L"100000111111111111111111100001",
				L"100000000000000000000000000001",
				L"110000000000000000000000000021",
				L"110000000000000000000000000011",
				L"110000000000000000000000000001",
				L"111111111111111111111111100001",
				L"000000000000000000000000000001",
				L"000000000000000000000000000001",
				L"000000000000000000000000000001",
				L"100000000000000050000000000001",
				L"100000000000000000000000000001",
				L"100000000220000000000000002221",
				L"133333333333333333333333333331",
				L"111111111111111111111111111111",
			} 
		}
	};

	P nowStage = { 0, 0 };
	bool doRestart = false;
	void clear();
	void render();
	void start();

	virtual void LateUpdate();

	enum {
		TOP = 1,
		LEFT = 2,
		BOTTOM = 3,
		RIGHT = 4
	};
	int nextPlayerPos;
};